var Base;(function(){var e={},t=/xyz/.test(function(){})?/\b_super\b/:/.*/;Base=function(){},Base.addMethod=function(e,n){var i=this._super&&this._super.prototype;i&&t.test(n)?this.prototype[e]=function(){var t=this._super;this._super=i[e];try{var r=n.apply(this,arguments)}finally{this._super=t}return r}:this.prototype[e]=n},Base.addMethods=function(e){for(var t in e)"function"==typeof e[t]?this.addMethod(t,e[t]):this.prototype[t]=e[t]},Base.subclassOf=function(e){for(var t=this;t;){if(t===e)return!0;t=t._super}},Base.extend=function(t){var n=function(){if(arguments[0]!==e){if(!(this instanceof n)){var t=new n(e);return t.init&&t.init.apply(t,arguments),t}this.init&&this.init.apply(this,arguments)}};return n.constructor=n,n.extend=Base.extend,n.addMethod=Base.addMethod,n.addMethods=Base.addMethods,n.subclassOf=Base.subclassOf,n._super=this,n.prototype=new this(e),n.prototype.constructor=n,n.addMethods(t),n}})(),function(e){var t={UNICODE:/\\[0-9a-f]{1,6}(?:\r\n|[ \n\r\t\f])?/,ESCAPE:/(?:UNICODE)|\\[^\n\r\f0-9a-f]/,NONASCII:/[^\x00-\x7F]/,NMSTART:/[_a-z]|(?:NONASCII)|(?:ESCAPE)/,NMCHAR:/[_a-z0-9-]|(?:NONASCII)|(?:ESCAPE)/,IDENT:/-?(?:NMSTART)(?:NMCHAR)*/,NL:/\n|\r\n|\r|\f/,STRING:/(?:STRING1)|(?:STRING2)|(?:STRINGBARE)/,STRING1:/"(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\"])*"/,STRING2:/'(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\'])*'/,STRINGBARE:/(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\]])*/,FUNCTION:/(?:IDENT)\(\)/,INTEGER:/[0-9]+/,WITHN:/([-+])?(INTEGER)?(n)\s*(?:([-+])\s*(INTEGER))?/,WITHOUTN:/([-+])?(INTEGER)/},n={not:/:not\(/,not_end:/\)/,tag:/((?:IDENT)|\*)/,id:/#(IDENT)/,cls:/\.(IDENT)/,attr:/\[\s*(IDENT)\s*(?:([^=]?=)\s*(STRING)\s*)?\]/,pseudo_el:/(?::(first-line|first-letter|before|after))|(?:::((?:FUNCTION)|(?:IDENT)))/,pseudo_cls_nth:/:nth-child\(\s*(?:(?:WITHN)|(?:WITHOUTN)|(odd|even))\s*\)/,pseudo_cls:/:(IDENT)/,comb:/\s*(\+|~|>)\s*|\s+/,comma:/\s*,\s*/,important:/\s+!important\s*$/},i=/[A-Z][A-Z0-9]+/;for(var r in n){for(var s,a=n[r].source;s=a.match(i);)a=a.replace(s[0],t[s[0]].source);n[r]=new RegExp(a,"gi")}var o=Base.extend({init:function(e){this.str=e,this.pos=0},match:function(e){var t;return e.lastIndex=this.pos,(t=e.exec(this.str))&&t.index==this.pos?(this.pos=e.lastIndex?e.lastIndex:this.str.length,t):null},peek:function(e){var t;return e.lastIndex=this.pos,(t=e.exec(this.str))&&t.index==this.pos?t:null},showpos:function(){return this.str.slice(0,this.pos)+"<HERE>"+this.str.slice(this.pos)},done:function(){return this.pos==this.str.length}}),c=Base.extend({}),l=c.extend({init:function(){this.tag=null,this.id=null,this.classes=[],this.attrs=[],this.nots=[],this.pseudo_classes=[],this.pseudo_els=[]},parse:function(e){var t;(t=e.match(n.tag))&&(this.tag=t[1]);do{if(t=e.match(n.not)){if(this.nots[this.nots.length]=h().parse(e),!(t=e.match(n.not_end)))throw"Invalid :not term in selector"}else if(t=e.match(n.id))this.id=t[1];else if(t=e.match(n.cls))this.classes[this.classes.length]=t[1];else if(t=e.match(n.attr))this.attrs[this.attrs.length]=[t[1],t[2],t[3]];else if(t=e.match(n.pseudo_el))this.pseudo_els[this.pseudo_els.length]=t[1]||t[2];else if(t=e.match(n.pseudo_cls_nth)){if(t[3])var i=parseInt((t[1]||"")+(t[2]||"1")),r=parseInt((t[4]||"")+(t[5]||"0"));else i=t[8]?2:0,r=t[8]?4-t[8].length:parseInt((t[6]||"")+t[7]);this.pseudo_classes[this.pseudo_classes.length]=["nth-child",[i,r]]}else(t=e.match(n.pseudo_cls))&&(this.pseudo_classes[this.pseudo_classes.length]=[t[1]])}while(t&&!e.done());return this}}),u=c.extend({init:function(){this.parts=[]},parse:function(e){for(this.parts[this.parts.length]=l().parse(e);!e.done()&&!e.peek(n.comma)&&(s=e.match(n.comb));)this.parts[this.parts.length]=s[1]||" ",this.parts[this.parts.length]=l().parse(e);return 1==this.parts.length?this.parts[0]:this}}),h=c.extend({init:function(){this.parts=[]},parse:function(e){for(this.parts[this.parts.length]=u().parse(e);!e.done()&&(s=e.match(n.comma));)this.parts[this.parts.length]=u().parse(e);return 1==this.parts.length?this.parts[0]:this}});e.selector=function(e){var t=o(e),n=h().parse(t);if(n.selector=e,t.done())return n;throw"Could not parse selector - "+t.showpos()},e.selector.SelectorBase=c,e.selector.SimpleSelector=l,e.selector.Selector=u,e.selector.SelectorsGroup=h}(jQuery),function(e){e.selector.SimpleSelector.addMethod("specifity",function(){if(this.spec)return this.spec;var t=[this.id?1:0,this.classes.length+this.attrs.length+this.pseudo_classes.length,(this.tag&&"*"!=this.tag?1:0)+this.pseudo_els.length];return e.each(this.nots,function(e,n){var i=n.specifity();t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]}),this.spec=t}),e.selector.Selector.addMethod("specifity",function(){if(this.spec)return this.spec;var t=[0,0,0];return e.each(this.parts,function(e,n){if(!(e%2)){var i=n.specifity();t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]}}),this.spec=t}),e.selector.SelectorsGroup.addMethod("specifity",function(){if(this.spec)return this.spec;var t=[0,0,0];return e.each(this.parts,function(e,n){var i=n.specifity();t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]}),this.spec=t})}(jQuery),function(e){function t(e){return e.complex?l(["l"+ ++g+":{",e.replace(a,"break l"+g),"}"]):e.replace(a,"")}var n=document.createElement("div");n.innerHTML='<form id="test"><input name="id" type="text"/></form>';var i,r="test"!==n.firstChild.getAttribute("id"),s=n.firstElementChild&&"FORM"==n.firstElementChild.tagName,a=(n.children&&n.children[0].tagName,/GOOD/g),o=/BAD/g,c=/^['"]/g,l=function(e){return e.join("\n")},u=function(e){var t=new String(e.join("\n"));return t.complex=!0,t},h=function(e){return"_"+e.replace(/^[^A-Za-z]|[^A-Za-z0-9]/g,function(e){return"_0x"+e.charCodeAt(0).toString(16)+"_"})};if(r){var d={class:"className",for:"htmlFor"};i=function(e){var t=d[e]||e;return"var "+h(e)+' = el.getAttribute("'+t+'",2) || (el.getAttributeNode("'+e+'")||{}).nodeValue;'}}else i=function(e){return"var "+h(e)+' = el.getAttribute("'+e+'");'};var f={"-":"!K","=":'K != "V"',"!=":'K == "V"',"~=":'_WS_K.indexOf(" V ") == -1',"^=":'!K || K.indexOf("V") != 0',"*=":'!K || K.indexOf("V") == -1',"$=":'!K || K.substr(K.length-"V".length) != "V"'},p=e.selector.State=Base.extend({init:function(){this.reset()},reset:function(){this.attrs={},this.wsattrs={}},prev:function(){return this.reset(),s?"el = el.previousElementSibling":"while((el = el.previousSibling) && el.nodeType != 1) {}"},next:function(){return this.reset(),s?"el = el.nextElementSibling":"while((el = el.nextSibling) && el.nodeType != 1) {}"},prevLoop:function(e){return this.reset(),l(s?["while(el = el.previousElementSibling){",e]:["while(el = el.previousSibling){","if (el.nodeType != 1) continue;",e])},parent:function(){return this.reset(),"el = el.parentNode;"},parentLoop:function(e){return this.reset(),l(["while((el = el.parentNode) && el.nodeType == 1){",e,"}"])},uses_attr:function(e){if(!this.attrs[e])return this.attrs[e]=!0,i(e)},uses_wsattr:function(e){if(!this.wsattrs[e])return this.wsattrs[e]=!0,l([this.uses_attr(e),"var _WS_"+h(e)+' = " "+'+h(e)+'+" ";'])},uses_jqueryFilters:function(){if(!this.jqueryFiltersAdded)return this.jqueryFiltersAdded=!0,"var _$filters = jQuery.find.selectors.filters;"},save:function(e){return"var el"+e+" = el;"},restore:function(e){return this.reset(),"el = el"+e+";"}}),v={"first-child":l(["var cel = el;","while(cel = cel.previousSibling){ if (cel.nodeType === 1) BAD; }"]),"last-child":l(["var cel = el;","while(cel = cel.nextSibling){ if (cel.nodeType === 1) BAD; }"]),"nth-child":function(e,t){var n=l(["var i = 1, cel = el;","while(cel = cel.previousSibling){","if (cel.nodeType === 1) i++;","}"]);return l(0==e?[n,"if (i- "+t+" != 0) BAD;"]:0==t&&e>=0?[n,"if (i%"+e+" != 0 || i/"+e+" < 0) BAD;"]:0==t&&e<0?["BAD;"]:[n,"if ((i- "+t+")%"+e+" != 0 || (i- "+t+")/"+e+" < 0) BAD;"])}};v["only-child"]=l([v["first-child"],v["last-child"]]),e.selector.SimpleSelector.addMethod("compile",function(t){var n=[];return this.tag&&"*"!=this.tag&&(n[n.length]='if (el.tagName != "'+this.tag.toUpperCase()+'") BAD;'),this.id&&(n[n.length]=t.uses_attr("id"),n[n.length]='if (_id !== "'+this.id+'") BAD;'),this.classes.length&&(n[n.length]=t.uses_wsattr("class"),e.each(this.classes,function(e,t){n[n.length]='if (_WS__class.indexOf(" '+t+' ") == -1) BAD;'})),e.each(this.attrs,function(e,i){n[n.length]="~="==i[1]?t.uses_wsattr(i[0]):t.uses_attr(i[0]);var r=f[i[1]||"-"];r=r.replace(/K/g,h(i[0])).replace(/V/g,i[2]&&i[2].match(c)?i[2].slice(1,-1):i[2]),n[n.length]="if ("+r+") BAD;"}),e.each(this.nots,function(i,r){var s=++g,c=l(["l"+s+":{",r.compile(t).replace(o,"break l"+s).replace(a,"BAD"),"}"]);r instanceof e.selector.SimpleSelector||(c=l([t.save(s),c,t.restore(s)])),n[n.length]=c}),e.each(this.pseudo_classes,function(i,r){var s=v[r[0]];s?n[n.length]="function"==typeof s?s.apply(this,r[1]):s:(s=e.find.selectors.filters[r[0]])&&(n[n.length]=t.uses_jqueryFilters(),n[n.length]="if (!_$filters."+r[0]+"(el)) BAD;")}),n[n.length]="GOOD",l(n)});var g=0,m={" ":function(e,t,n){return u([n,"while(true){",e.parent(),"if (!el || el.nodeType !== 1) BAD;",t.compile(e).replace(o,"continue"),"}"])},">":function(e,t,n){return l([n,e.parent(),"if (!el || el.nodeType !== 1) BAD;",t.compile(e)])},"~":function(e,t,n){return u([n,e.prevLoop(),t.compile(e).replace(o,"continue"),"}","BAD;"])},"+":function(e,t,n){return l([n,e.prev(),"if (!el) BAD;",t.compile(e)])}};e.selector.Selector.addMethod("compile",function(e){for(var n=this.parts.length,i=this.parts[--n].compile(e);n;){var r=this.parts[--n];i=m[r](e,this.parts[--n],t(i))}return i}),e.selector.SelectorsGroup.addMethod("compile",function(e){for(var t=[],n=++g,i=0;i<this.parts.length;i++)t[t.length]=l([0==i?e.save(n):e.restore(n),"l"+n+"_"+i+":{",this.parts[i].compile(e).replace(o,"break l"+n+"_"+i),"}"]);return t[t.length]="BAD;",l(t)}),e.selector.SelectorBase.addMethod("matches",function(e){return this.matches=new Function("el",l(["if (!el) return false;",this.compile(new p).replace(o,"return false").replace(a,"return true")])),this.matches(e)})}(jQuery),function(e){var t=/DIRECT/g,n=/CONTEXT/g,i=/DIRECT|CONTEXT/g;e.selector.SelectorBase.addMethod("affectedBy",function(e){return this.affectedBy=new Function("props",["var direct_classes, context_classes, direct_attrs, context_attrs, t;",this.ABC_compile().replace(t,"direct").replace(n,"context"),"return {classes: {context: context_classes, direct: direct_classes}, attrs: {context: context_attrs, direct: direct_attrs}};"].join("\n")),this.affectedBy(e)}),e.selector.SimpleSelector.addMethod("ABC_compile",function(){var t=[];return e.each(this.classes,function(e,n){t[t.length]="if (t = props.classes['"+n+"']) (DIRECT_classes || (DIRECT_classes = {}))['"+n+"'] = t;"}),e.each(this.nots,function(e,n){t[t.length]=n.ABC_compile()}),t.join("\n")}),e.selector.Selector.addMethod("ABC_compile",function(e){var t=[],n=this.parts.length-1;for(t[t.length]=this.parts[n].ABC_compile();(n-=2)>=0;)t[t.length]=this.parts[n].ABC_compile().replace(i,"CONTEXT");return t.join("\n")}),e.selector.SelectorsGroup.addMethod("ABC_compile",function(){var t=[];return e.each(this.parts,function(e,n){t[t.length]=n.ABC_compile()}),t.join("\n")})}(jQuery),function(e){var t;void 0===e.support.focusinBubbles&&(e.support.focusinBubbles=!0),e.support.focusinBubbles||e.event.special.focusin||e.each({focus:"focusin",blur:"focusout"},function(t,n){e.event.special[n]={setup:function(){if(!this.addEventListener)return!1;this.addEventListener(t,e.event.special[n].handler,!0)},teardown:function(){if(!this.removeEventListener)return!1;this.removeEventListener(t,e.event.special[n].handler,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=n,e.event.handle.apply(this,arguments)}}}),t=null,e(document).bind("focusin",function(n){var i=n.realTarget||n.target;t&&t!==i&&(n.type="focusout",e(t).trigger(n),n.type="focusin",n.target=i),t=i}).bind("focusout",function(e){t=null})}(jQuery);try{console.log}catch(e){window.console=void 0}(function(e){var t=function(){function t(e,n){return new t.fn.init(e,n)}jQuery.extend(!0,t,e),t.superclass=e,t.fn=t.prototype=e(),t.fn.constructor=t,t.fn.init=function(e,i){var r=jQuery.fn.init.call(this,e,i,n);return r instanceof t?r:t(r)},t.fn.init.prototype=t.fn;var n=t(document);return t},n={};e.entwine=function(){e.fn.entwine.apply(null,arguments)},e.extend(e.entwine,{namespaces:n,clear_all_rules:function(){for(var t in e.fn)e.fn[t].isentwinemethod&&delete e.fn[t];for(var t in e(document).unbind(".entwine"),e(window).unbind(".entwine"),n)delete n[t];for(var t in e.entwine.capture_bindings)delete e.entwine.capture_bindings[t]},WARN_LEVEL_NONE:0,WARN_LEVEL_IMPORTANT:1,WARN_LEVEL_BESTPRACTISE:2,warningLevel:0,warn:function(t,n){n<=e.entwine.warningLevel&&console&&console.warn&&(console.warn(t),console.trace&&console.trace())},warn_exception:function(t,n,i){e.entwine.WARN_LEVEL_IMPORTANT<=e.entwine.warningLevel&&console&&console.warn&&(2==arguments.length&&(i=n,n=null),n?console.warn("Uncaught exception",i,"in",t,"on",n):console.warn("Uncaught exception",i,"in",t),i.stack&&console.warn("Stack Trace:\n"+i.stack))}});var i=0,r=Base.extend({init:function(e,t){this.selector=e,this.specifity=e.specifity(),this.important=0,this.name=t,this.rulecount=i++}});r.compare=function(e,t){var n=e.specifity,i=t.specifity;return e.important-t.important||n[0]-i[0]||n[1]-i[1]||n[2]-i[2]||e.rulecount-t.rulecount},e.entwine.RuleList=function(){var e=[];return e.addRule=function(t,n){var i=r(t,n);return e[e.length]=i,e.sort(r.compare),i},e};var s=[];e.entwine.Namespace=Base.extend({init:function(i){if(i&&!i.match(/^[A-Za-z0-9.]+$/)&&e.entwine.warn("Entwine namespace "+i+" is not formatted as period seperated identifiers",e.entwine.WARN_LEVEL_BESTPRACTISE),i=i||"__base",this.name=i,this.store={},n[i]=this,"__base"==i)this.injectee=e.fn,this.$=e;else{this.$=e.sub?e.sub():t(),this.$.cache=e.cache,this.injectee=this.$.prototype;var r=this.injectee.entwine=function(t){var n=arguments;return t&&"string"==typeof t?"."!=t.charAt(0)&&(n[0]=i+"."+t):(n=e.makeArray(n),n.unshift(i)),e.fn.entwine.apply(this,n)};this.$.entwine=function(){r.apply(null,arguments)};for(var a=0;a<s.length;a++){var o,c=s[a];if(o=c.namespaceMethodOverrides){var l=o(this);for(var u in l)this.injectee[u]=l[u]}if(o=c.namespaceStaticOverrides){l=o(this);for(var u in l)this.$.entwine[u]=l[u]}}}},one:function(e,t,n){var i=this,r=this.store[e],s=function(e,a,o){for(void 0===o&&(o=r.length);o--;)if(r[o].selector.matches(e)){var c,l=e.i,u=e.f;e.i=o,e.f=s;try{c=r[o][t].apply(i.$(e),a)}finally{e.i=l,e.f=u}return c}if(n)return n.apply(i.$(e),a)};return s},build_proxy:function(t,n){var i=this.one(t,"func",n),r=function(){for(var t,n=e(this),r=n.length;r--;)t=i(n[r],arguments);return t};return r},bind_proxy:function(t,n,i){var r=this.store[n]||(this.store[n]=e.entwine.RuleList()),s=r.addRule(t,n);s.func=i,this.injectee.hasOwnProperty(n)&&this.injectee[n].isentwinemethod||(this.injectee[n]=this.build_proxy(n,this.injectee.hasOwnProperty(n)?this.injectee[n]:null),this.injectee[n].isentwinemethod=!0),this.injectee[n].isentwinemethod||e.entwine.warn("Warning: Entwine function "+n+" clashes with regular jQuery function - entwine function will not be callable directly on jQuery object",e.entwine.WARN_LEVEL_IMPORTANT)},add:function(e,t){for(var n in t)for(var i=t[n],r=0;r<s.length&&(!s[r].bind||!s[r].bind.call(this,e,n,i));r++);},has:function(e,t){var n=this.store[t];if(!n)return!1;for(var i=0;i<n.length;i++)if(e=e.not(n[i].selector),!e.length)return!0;return!1}}),e.entwine.Namespace.addHandler=function(e){for(var t=0;t<s.length&&s[t].order<e.order;t++);s.splice(t,0,e)},e.entwine.Namespace.addHandler({order:50,bind:function(t,n,i){if(e.isFunction(i))return this.bind_proxy(t,n,i),!0}}),e.extend(e.fn,{entwine:function(t){var i=0,r=null,s=n.__base||e.entwine.Namespace();for("string"==typeof t&&("."==t.charAt("0")&&(t=t.substr(1)),t&&(s=n[t]||e.entwine.Namespace(t)),i=1);i<arguments.length;){var a=arguments[i++];e.isFunction(a)&&(1!=a.length&&e.entwine.warn("Function block inside entwine definition does not take $ argument properly",e.entwine.WARN_LEVEL_IMPORTANT),a=a.call(s.$(this),s.$)),a&&(null===r&&(r=!!this.selector&&e.selector(this.selector)),r?s.add(r,a):e.entwine.warn("Entwine block given to entwine call without selector. Make sure you call $(selector).entwine when defining blocks",e.entwine.WARN_LEVEL_IMPORTANT))}return s.$(this)},_super:function(){for(var e,t=this.length;t--;){var n=this[0];e=n.f(n,arguments,n.i)}return e}})})(jQuery),function(e){function t(e,t){for(var n,i=e.length,r=t.firstChild;n=r;)for(1===n.nodeType&&(e[i++]=n),r=n.firstChild||n.nextSibling;!r&&(n=n.parentNode)&&n!==t;)r=n.nextSibling}var n=!1,i=function(i){var r=function(r){var s=[];n||(1==r.nodeType&&(s[s.length]=r),t(s,r));var a=i.apply(this,arguments);if(!n&&s.length){var o=e.Event("EntwineElementsAdded");o.targets=s,e(document).triggerHandler(o)}return a};return r.patched=!0,r},r=e.prototype.jquery.split("."),s=r[0]>1||r[1]>=10?1:2,a=e.prototype.domManip;e.prototype.domManip=function(){return arguments[s].patched||(arguments[s]=i(arguments[s])),a.apply(this,arguments)};var o=e.prototype.html;e.prototype.html=function(i){if(void 0===i)return o.apply(this,arguments);n=!0;var r=o.apply(this,arguments);n=!1;for(var s=[],a=0,c=this.length;a<c;a++)t(s,this[a]);var l=e.Event("EntwineElementsAdded");return l.targets=s,e(document).triggerHandler(l),r};var c=!1,l=e.cleanData;e.cleanData=function(t){var n=t;if(c)for(var i=0,r=t.length,s=(n=[],0);i<r;i++)for(var a=t[i],o=a;o=o.parentNode;)if(9==o.nodeType){n[s++]=a;break}if(n.length){var u=e.Event("EntwineElementsRemoved");u.targets=n,e(document).triggerHandler(u)}c||l.apply(this,arguments)};var u=e.prototype.remove;e.prototype.remove=function(e,t){c=t;var n=u.call(this,e);return c=!1,n},e(function(){var n=[];t(n,document);var i=e.Event("EntwineElementsAdded");i.targets=n,e(document).triggerHandler(i)})}(jQuery),function(e){var t=function(){var t=e.makeArray(arguments),n=t.pop();e.each(t,function(t,i){var r=e.fn[i];e.fn[i]=function(){var t=this,i=e.makeArray(arguments),s=r.apply(t,i);return n.apply(t,i),s}})},n=window.setTimeout,i=Base.extend({init:function(){this.global=!1,this.attrs={},this.classes={}},triggerEvent:function(){r==this&&(this.check_id&&clearTimeout(this.check_id),r=new i,e(document).triggerHandler("EntwineSubtreeMaybeChanged",[this]))},changed:function(){if(!this.check_id){var e=this;this.check_id=n(function(){e.check_id=null,e.triggerEvent()},10)}},addAll:function(){return this.global?this:(this.global=!0,this.changed(),this)},addSubtree:function(e){return this.addAll()},addSubtreeFuture:function(t){return this.global?this:(this.subtree=this.subtree?this.subtree.add(t):e(t),this.changed(),this)},addAttr:function(t,n){return this.global?this:(this.attrs[t]=t in this.attrs?this.attrs[t].add(n):e(n),this.changed(),this)},addClass:function(t,n){return this.global?this:(this.classes[t]=t in this.classes?this.classes[t].add(n):e(n),this.changed(),this)}}),r=new i;e(document).bind("EntwineElementsAdded",function(e){r.addSubtree(e.targets)});var s=null;e(document).bind("EntwineElementsRemoved",function(e){s=e.targets}),t("remove","html","empty",function(){var e=s;s=null,e&&r.addSubtree(e)}),t("removeAttr",function(e){r.addAttr(e,this)}),t("addClass","removeClass","toggleClass",function(e){"string"==typeof e&&r.addClass(e,this)}),t("attr",function(e,t){if(void 0!==t&&"string"==typeof e)r.addAttr(e,this);else if("string"!=typeof e)for(var n in e)r.addAttr(n,this)}),e.extend(e.entwine,{synchronous_mode:function(){r&&r.check_id&&clearTimeout(r.check_id),r=new i,n=function(e,t){return e.call(this),null}},triggerMatching:function(){r.addAll()}})}(jQuery),function(e){if(null==e.support.changeBubbles){e.support.changeBubbles=!0;var t=document.createElement("div");if(eventName="onchange",t.attachEvent){var n=eventName in t;n||(t.setAttribute(eventName,"return;"),n="function"==typeof t[eventName]),e.support.changeBubbles=n}}if(document.compareDocumentPosition)var i=function(e,t){return e&&t&&(e==t||!!(16&e.compareDocumentPosition(t)))};else i=function(e,t){return e&&t&&(e==t||!e.contains||e.contains(t))};e.entwine.Namespace.addMethods({build_event_proxy:function(e){var t=this.one(e,"func"),n=function(e,n){e=e.delegatedEvent||e;for(var i=e.target;i&&1==i.nodeType&&!e.isPropagationStopped();){var r=t(i,arguments);void 0!==r&&(e.result=r),!1===r&&(e.preventDefault(),e.stopPropagation()),i=i.parentNode}};return n},build_mouseenterleave_proxy:function(e){var t=this.one(e,"func"),n=function(e){for(var n=e.target,r=e.relatedTarget;n&&1==n.nodeType&&!e.isPropagationStopped()&&!i(n,r);){var s=t(n,arguments);void 0!==s&&(e.result=s),!1===s&&(e.preventDefault(),e.stopPropagation()),n=n.parentNode}};return n},build_change_proxy:function(e){var t=this.one(e,"func"),n=function(e){var t=e.type,n=e.value;return"radio"===t||"checkbox"===t?n=e.checked:"select-multiple"===t?(n="",e.selectedIndex>-1&&(n=jQuery.map(e.options,function(e){return e.selected}).join("-"))):jQuery.nodeName(e,"select")&&(n=e.selectedIndex),n},i=/^(?:textarea|input|select)$/i,r=function(e){var r,s,a=e.target;if(i.test(a.nodeName)&&!a.readOnly&&(r=jQuery.data(a,"_entwine_change_data"),s=n(a),"focusout"===e.type&&"radio"===a.type||jQuery.data(a,"_entwine_change_data",s),void 0!==r&&s!==r&&(null!=r||s)))for(e.type="change";a&&1==a.nodeType&&!e.isPropagationStopped();){var o=t(a,arguments);void 0!==o&&(e.result=o),!1===o&&(e.preventDefault(),e.stopPropagation()),a=a.parentNode}},s=function(e){var t=e.type,i=e.target,s=jQuery.nodeName(i,"input")?i.type:"";switch(t){case"focusout":case"beforedeactivate":r.apply(this,arguments);break;case"click":("radio"===s||"checkbox"===s||jQuery.nodeName(i,"select"))&&r.apply(this,arguments);break;case"keydown":(13===e.keyCode&&!jQuery.nodeName(i,"textarea")||32===e.keyCode&&("checkbox"===s||"radio"===s)||"select-multiple"===s)&&r.apply(this,arguments);break;case"focusin":case"beforeactivate":jQuery.data(i,"_entwine_change_data",n(i))}};return s},bind_event:function(t,n,i,r){var s=this.store[n]||(this.store[n]=e.entwine.RuleList()),a=s.proxies||(s.proxies={}),o=s.addRule(t,n);if(o.func=i,!a[n]){switch(n){case"onmouseenter":a[n]=this.build_mouseenterleave_proxy(n),r="mouseover";break;case"onmouseleave":a[n]=this.build_mouseenterleave_proxy(n),r="mouseout";break;case"onchange":e.support.changeBubbles||(a[n]=this.build_change_proxy(n),r="click keydown focusin focusout beforeactivate beforedeactivate");break;case"onsubmit":r="delegatedSubmit";break;case"onfocus":case"onblur":e.entwine.warn("Event "+r+" not supported - using focusin / focusout instead",e.entwine.WARN_LEVEL_IMPORTANT)}a[n]||(a[n]=this.build_event_proxy(n)),e(document).bind(r.replace(/(\s+|$)/g,".entwine$1"),a[n])}}}),e.entwine.Namespace.addHandler({order:40,bind:function(t,n,i){var r,s;if(e.isFunction(i)&&(r=n.match(/^on(.*)/)))return s=r[1],this.bind_event(t,n,i,s),!0}});var r=function(t,n){var i=e.Event("delegatedSubmit");return i.delegatedEvent=t,e(document).trigger(i,n)};e(document).bind("EntwineElementsAdded",function(t){var n=e(t.targets).filter("form");n.length&&n.bind("submit.entwine_delegate_submit",r)})}(jQuery),function(e){e.entwine.Namespace.addMethods({bind_capture:function(t,n,i,r){var s=this.captures||(this.captures={}),a=s[n]||(s[n]={}),o=a[i]||(a[i]=e.entwine.RuleList());rule=o.addRule(t,n),rule.handler=i,this.bind_proxy(t,i,r)}});var t=e.entwine.capture_bindings={},n=function(t){return function(n){var i,r,s,a,o,c;for(var l in e.entwine.namespaces)if(i=e.entwine.namespaces[l],r=i.captures,r&&(s=r[t]))for(var l in s)for(var u=s[l],h=i.$([]),d=u.length;d--;){a=u[d],o=a.handler,c=a.selector.selector;var f=i.$(c).not(h);f[o].apply(f,arguments),h=h.add(f)}}},i=function(t,n,i){var r=e.selector(t);return function(e){if(r.matches(e.target))return n.apply(this,arguments)}},r=function(e,t,n){return function(e){if(e.target===document)return t.apply(this,arguments)}},s=function(e,t,n){return function(e){if(e.target===window)return t.apply(this,arguments)}},a=function(t,n,i){return function(i){var r=this["get"+t]();if("string"==typeof r){var s=s&&r==s.selector?s:e.selector(r);if(s.matches(i.target))return n.apply(this,arguments)}else if(-1!==e.inArray(i.target,r))return n.apply(this,arguments)}};e.entwine.Namespace.addHandler({order:10,bind:function(o,c,l){var u;if(e.isPlainObject(l)&&(u=c.match(/^from\s*(.*)/))){var h,d=u[1];for(var f in h=d.match(/[^\w]/)?i:"Window"==d||"window"==d?s:"Document"==d||"document"==d?r:a,l){var p=l[f];u=f.match(/^on(.*)/);var v=u[1];if(this.bind_capture(o,v,c+"_"+v,h(d,p)),!t[v]){var g=v.replace(/(\s+|$)/g,".entwine$1");t[v]=n(v),e(h==s?window:document).bind(g,t[v])}}return!0}}})}(jQuery),function(e){e.entwine.Namespace.addMethods({bind_condesc:function(t,n,i){for(var r,s=this.store.ctors||(this.store.ctors=e.entwine.RuleList()),a=0;a<s.length;a++)if(s[a].selector.selector==t.selector){r=s[a];break}if(r||(r=s.addRule(t,"ctors")),r[n]=i,!s[n+"proxy"]){var o=this.one("ctors",n),c=this,l=function(t,i,r){for(var s=t.length;s--;){var a=t[s],l=a.i,u=a.f;a.i=i,a.f=o;try{r.call(c.$(a))}catch(t){e.entwine.warn_exception(n,a,t)}finally{a.i=l,a.f=u}}};s[n+"proxy"]=l}}}),e.entwine.Namespace.addHandler({order:30,bind:function(t,n,i){if(e.isFunction(i)&&("onmatch"==n||"onunmatch"==n))return this.matchersDirty=!0,this.bind_condesc(t,n,i),!0}}),e(document).bind("EntwineSubtreeMaybeChanged",function(t,n){for(var i in e.entwine.namespaces){var r=e.entwine.namespaces[i],s=r.store.ctors;if(s){for(var a,o,c,l,u,h,d,f,p=null,v=e([]),g=e([]),m=function(t){if(null===p){p=e([]);for(var n,i=s.length;--i>t;)(n=s[i].cache)&&(p=p.add(n))}},y=s.length;y--;){if(l=s[y],u=l.selector.selector,h=l.onmatch,d=l.onunmatch,c=null,f=!1,r.matchersDirty||n.global)f=!0;else{for(var i in n.attrs){f=!0;break}var w=l.selector.affectedBy(n);if(w.classes.context)f=!0;else for(var i in w.classes.direct){m(y);var _=n.classes[i].not(p);null===c&&(c=l.cache?l.cache.not(v).add(g.filter(u)):e([])),c=c.not(_).add(_.filter(u))}}f?(m(y),c=e(u).not(p)):c||(a=g.length&&g.filter(u),a&&a.length?c=l.cache?l.cache.not(v).add(a):a:(o=v.length&&l.cache&&l.cache.filter(v),o&&o.length&&(c=l.cache.not(o)))),null===c?p&&l.cache&&(p=p.add(l.cache)):(l.cache?(a=c.not(l.cache),o=l.cache.not(c)):(a=c,o=null),(a&&a.length||o&&o.length)&&(o&&o.length&&(g=g.add(o),d&&!l.onunmatchRunning&&(l.onunmatchRunning=!0,s.onunmatchproxy(o,y,d),l.onunmatchRunning=!1)),a&&a.length&&(v=v.add(a),g=g.not(a),h&&!l.onmatchRunning&&(l.onmatchRunning=!0,s.onmatchproxy(a,y,h),l.onmatchRunning=!1))),p&&(p=p.add(c)),l.cache=c)}r.matchersDirty=!1}}})}(jQuery),function(e){e.entwine.Namespace.addMethods({build_addrem_proxy:function(e){var t=this.one(e,"func");return function(){if(0!==this.length){if(this.length){for(var e,n=this.length;n--;)e=t(this[n],arguments);return e}return t(this,arguments)}}},bind_addrem_proxy:function(t,n,i){var r=this.store[n]||(this.store[n]=e.entwine.RuleList()),s=r.addRule(t,n);s.func=i,this.injectee.hasOwnProperty(n)||(this.injectee[n]=this.build_addrem_proxy(n),this.injectee[n].isentwinemethod=!0)}}),e.entwine.Namespace.addHandler({order:30,bind:function(t,n,i){if(e.isFunction(i)&&("onadd"==n||"onremove"==n))return this.bind_addrem_proxy(t,n,i),!0}}),e(document).bind("EntwineElementsAdded",function(t){for(var n in e.entwine.namespaces){var i=e.entwine.namespaces[n];i.injectee.onadd&&i.injectee.onadd.call(t.targets)}}),e(document).bind("EntwineElementsRemoved",function(t){for(var n in e.entwine.namespaces){var i=e.entwine.namespaces[n];i.injectee.onremove&&i.injectee.onremove.call(t.targets)}})}(jQuery),function(e){var t="__entwine!",n=function(e,n,i){return e.data(t+n+"!"+i)},i=function(e,n,i,r){return e.data(t+n+"!"+i,r)},r=function(e,n){var i={},r=jQuery.data(e[0]),s=t+n+"!",a=s.length,o=jQuery.cache[r];for(var c in o)c.substr(0,a)==s&&(i[c.substr(a)]=o[c]);return i},s=function(e,t,n){for(var r in n)i(t,r,n[r])},a=function(e,t,a){switch(a.length){case 0:return r(e,t);case 1:return"string"==typeof a[0]?n(e,t,a[0]):s(e,t,a[0]);default:return i(e,t,a[0],a[1])}};e.extend(e.fn,{entwineData:function(){return a(this,"__base",arguments)}}),e.entwine.Namespace.addHandler({order:60,bind:function(t,n,i){n.charAt(0)!=n.charAt(0).toUpperCase()&&e.entwine.warn("Entwine property "+n+" does not start with a capital letter",e.entwine.WARN_LEVEL_BESTPRACTISE);var r="get"+n,s="set"+n;this.bind_proxy(t,r,function(){var e=this.entwineData(n);return void 0===e?i:e}),this.bind_proxy(t,s,function(e){return this.entwineData(n,e)});var a=this.injectee[r],o=this.injectee[s];return this.bind_proxy(t,n,function(e){return(1==arguments.length?o:a).call(this,e)}),!0},namespaceMethodOverrides:function(e){return{entwineData:function(){return a(this,e.name,arguments)}}}})}(jQuery),function(e){e.concrete=e.entwine,e.fn.concrete=e.fn.entwine,e.fn.concreteData=e.fn.entwineData,e.entwine.Namespace.addHandler({order:100,bind:function(e,t,n){return!1},namespaceMethodOverrides:function(e){return e.$.concrete=e.$.entwine,e.injectee.concrete=e.injectee.entwine,e.injectee.concreteData=e.injectee.entwineData,{}}})}(jQuery);